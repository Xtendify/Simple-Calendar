/*! Simple Calendar - 3.2.0
 * https://simplecalendar.io
 * Copyright (c) Xtendify Technologies 2023
 * Licensed GPLv2+ */

!function(){"use strict";jQuery(function(s){s(".simcal-help-tip").tipTip({attribute:"data-tip",delay:200,fadeIn:50,fadeOut:50}),s(".simcal-shortcode-tip").tipTip({activation:"click",defaultPosition:"top",delay:200,fadeIn:50,fadeOut:50});var i=s("#simcal-calendar-settings"),e=i.find(".simcal-box-handle"),a=i.find(".hndle"),e=(s(e).appendTo(a),s(function(){s(a).unbind("click.postboxes"),i.on("click","h3.hndle",function(e){s(e.target).filter("input, option, label, select").length||i.toggleClass("closed")})}),s(document.body).on("simcal-init-tabbed-panels",function(){s(".simcal-tabs").show(),s(".simcal-tabs a").click(function(){var e=s(this).closest("div.simcal-panels-wrap");return s("ul.simcal-tabs li",e).removeClass("active"),s(this).parent().addClass("active"),s("div.simcal-panel",e).hide(),s(s(this).attr("href")).show(),!1}),s("div.simcal-panels-wrap").each(function(){s(this).find("ul.simcal-tabs > li").eq(0).find("a").click()})}).trigger("simcal-init-tabbed-panels"),s("#_feed_type").on("change",function(){var e=s(this).find("option:selected").val(),i=s(".simcal-tabs"),a=i.find("> .simcal-feed-type"),e=i.find("> .simcal-feed-type-"+e),i=i.find("> li:first-child > a");a.each(function(){s(this).hide()}),e.show(),i.trigger("click")}).trigger("change"),i.show(),s("#_calendar_view_default-calendar")),t=s("#default-calendar-settings"),n=t.find(".simcal-default-calendar-grid"),l=t.find(".simcal-default-calendar-list"),c=t.find(".simcal-default-calendar-list-grouped");e.on("change",function(){var e=s(this).val();"grid"==e?(l.hide(),c.hide(),n.show()):"list"==e?(n.hide(),c.hide(),l.show()):"list-grouped"==e&&(n.hide(),l.hide(),c.show())}).trigger("change"),s("#_calendar_type").on("change",function(){s('label[for*="_calendar_view_"]').hide(),s('#calendar-settings-panel table[id*="-settings"]').hide(),s('label[for="_calendar_view_'+s(this).val()+'"]').show(),s('#calendar-settings-panel table[id="'+s(this).val()+'-settings"]').show()}).trigger("change"),s(".simcal-field-color-picker").wpColorPicker(),s(".simcal-field-select-enhanced").each(function(e,i){var i=s(i),a=i.data("noresults"),t=i.data("allowclear");i.select2({allowClear:"undefined"!=t&&t,placeholder:{id:"",placeholder:""},dir:"undefined"!=simcal_admin.text_dir?simcal_admin.text_dir:"ltr",tokenSeparators:[","],width:"100%",language:{noResults:function(){return"undefined"!=a?a:""}}})});s(".simcal-field-date-picker").each(function(e,i){var i=s(i).find("input"),a={autoSize:!0,changeMonth:!0,changeYear:!0,dateFormat:"yy-mm-dd",firstDay:1,prevText:'<i class="simcal-icon-left"></i>',nextText:'<i class="simcal-icon-right"></i>',yearRange:"1900:2050",beforeShow:function(e,i){s("#ui-datepicker-div").addClass("simcal-date-picker")}};s(i).datepicker(a),s(i).datepicker("option",s.datepicker.regional[simcal_admin.locale])});t=s(".simcal-field-datetime-format");function d(e){var i=s(e).find("input"),a=s(e).find("> div select"),e=s(e).find("code"),n="",l="";a.each(function(e,i){var a=s(i).val(),t=s(i).find("> option:selected");a.length&&(t.data("trim")?(n=n.trim()+s(i).val(),l=l.trim()+t.data("preview")):(n+=s(i).val()+" ",l+=t.data("preview")+" "))}),i.val(n),e.text(l)}t.sortable({items:"> div",stop:function(){d(s(this))}}),t.each(function(e,i){s(i).find("> div select").each(function(e,i){s(i).on("change",function(){d(s(this).closest("div.simcal-field-datetime-format"))})}),d(i)}),s(".simcal-field-datetime-format-php").each(function(e,i){var a=s(i).find("input"),t=s(i).find("code");s(a).on("keyup",function(){var e={action:"simcal_date_i18n_input_preview",value:a.val()};s.post(simcal_admin.ajax_url,e,function(e){s(t).text(e.data)})})}),s('input[type="number"].simcal-field').each(function(e,i){var i=s(i),a=i.attr("min"),t=i.attr("max");i.on("change",function(){var e=parseInt(s(this).val());a&&e<a&&s(this).val(a),t&&t<e&&s(this).val(t)})}),s(".simcal-field-switch-other").on("change",function(){s(this).find("option").each(function(e,i){var a=s(i).data("show-field"),t=s(i).data("show-fields"),n=s(i).data("hide-field"),l=s(i).data("hide-fields"),a=a?s("#"+a):"",n=n?s("#"+n):"";s(i).is(":selected")&&(a&&a.show(),n&&n.hide(),t&&(i=l.split(","),s(i).each(function(e,i){s("#"+i).hide()})),l)&&(a=l.split(","),s(a).each(function(e,i){s("#"+i).hide()}))})}).trigger("change"),s(".simcal-field-show-other").on("change",function(){s(this).find("option").each(function(e,i){var a=s(i).data("show-field"),t=void 0!==a&&a.length?s("#"+a):"",a=void 0!==a&&a.length?t.next():"";t.length&&(s(i).is(":selected")?(t.show(),a.hasClass("select2")&&a.show()):(t.hide(),a.hasClass("select2")&&a.hide()))})}).trigger("change"),s(".simcal-field-show-next").on("change",function(){var e,i,a,t;s(this).is(":checkbox")?(a=s(this).parent().next(),s(this).is(":checked")?a.show():a.hide()):(e=s(this).val(),i=s(this).data("show-next-if-value"),t=(a=s(this).nextUntil().not("i")).length?a.next():"",e==i?(a.show(),t.hasClass("select2")&&t.show()):(a.hide(),t.hasClass("select2")&&t.hide()))}).trigger("change"),s("#simcal-clear-cache").on("click",function(e){e.preventDefault();var i=s(this).find("i");s.ajax({url:simcal_admin.ajax_url,method:"POST",data:{action:"simcal_clear_cache",id:s(this).data("id"),nonce:simcal_admin.nonce},beforeSend:function(){i.fadeToggle()},success:function(){i.fadeToggle()},error:function(e){console.log(e)}})}),s("#simcal-drip-signup").on("click",function(e){e.preventDefault();var e=s("#simcal-drip"),i=e.find(".signup"),a=e.find(".thank-you"),t=s("#simcal-drip-form"),n=e.find("#simcal-drip-field-first_name"),l=t.find("#simcal-drip-real-field-first_name"),e=e.find("#simcal-drip-field-email"),c=t.find("#simcal-drip-real-field-email");l.val(n.val()),c.val(e.val()),i.hide(),a.show(),t.submit()}),s("#_feed_type").on("change",function(e){"grouped-calendars"===s(this).val()?s("#use_calendar").remove():s("#use_calendar").length||s("#_feed_timezone_setting").append('<option id="use_calendar" value="use_calendar" data-show-field="_use_calendar_warning">Event source default</option>')}),s(".simcal-addon-manage-license").on("click",function(e){e.preventDefault();var i="",a=s(this),t=a.closest(".simcal-addon-manage-license-buttons"),n=a.closest(".simcal-addon-manage-license-field").find("> input"),l=t.find(".error"),c=a.find("i");if(s(this).hasClass("activate"))i="activate_license";else{if(!s(this).hasClass("deactivate"))return;i="deactivate_license"}s.ajax({url:simcal_admin.ajax_url,method:"POST",data:{action:"simcal_manage_add_on_license",add_on:s(this).data("add-on"),license_key:n.val(),license_action:i,nonce:s("#simcal_license_manager").val()},beforeSend:function(){c.fadeToggle()},success:function(e){c.fadeToggle(),"activate_license"==i?"valid"==e.data?(a.hide(),n.attr("disabled","disabled"),s(t).find(".label").show(),s(t).find(".deactivate").show(),l.hide()):l.show().text(e.data):"deactivated"==e.data?(a.hide(),n.removeAttr("disabled"),s(t).find(".label").hide(),s(t).find(".activate").show(),l.hide()):l.show().text(e.data)},error:function(e){console.log(e),c.fadeToggle()}})}),s("#simcal-reset-licenses").on("click",function(e){e.preventDefault();var i=s(this).find("i"),e=s(this).data("dialog");!0===confirm(e)&&s.ajax({url:simcal_admin.ajax_url,method:"POST",data:{action:"simcal_reset_add_ons_licenses",nonce:s("#simcal_license_manager").val()},beforeSend:function(){i.toggle()},success:function(e){"success"==e.data?location.reload():console.log(e)},error:function(e){console.log(e)}})})})}();