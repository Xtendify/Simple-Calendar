/*! Simple Calendar - 3.1.39
 * https://simplecalendar.io
 * Copyright (c) Xtendify Technologies 2023
 * Licensed GPLv2+ */

!function(){"use strict";window.jQuery(function(c){c(".simcal-help-tip").tipTip({attribute:"data-tip",delay:200,fadeIn:50,fadeOut:50}),c(".simcal-shortcode-tip").tipTip({activation:"click",defaultPosition:"top",delay:200,fadeIn:50,fadeOut:50});const i=c("#simcal-calendar-settings"),e=i.find(".simcal-box-handle"),a=i.find(".hndle"),t=(c(e).appendTo(a),c(function(){c(a).unbind("click.postboxes"),i.on("click","h3.hndle",function(e){c(e.target).filter("input, option, label, select").length||i.toggleClass("closed")})}),c(document.body).on("simcal-init-tabbed-panels",function(){c(".simcal-tabs").show(),c(".simcal-tabs a").click(function(){var e=c(this).closest("div.simcal-panels-wrap");return c("ul.simcal-tabs li",e).removeClass("active"),c(this).parent().addClass("active"),c("div.simcal-panel",e).hide(),c(c(this).attr("href")).show(),!1}),c("div.simcal-panels-wrap").each(function(){c(this).find("ul.simcal-tabs > li").eq(0).find("a").click()})}).trigger("simcal-init-tabbed-panels"),c("#_feed_type").on("change",function(){var e=c(this).find("option:selected").val(),i=c(".simcal-tabs"),a=i.find("> .simcal-feed-type"),e=i.find("> .simcal-feed-type-"+e),i=i.find("> li:first-child > a");a.each(function(){c(this).hide()}),e.show(),i.trigger("click")}).trigger("change"),i.show(),c("#_calendar_view_default-calendar")),n=c("#default-calendar-settings"),l=n.find(".simcal-default-calendar-grid"),s=n.find(".simcal-default-calendar-list"),d=n.find(".simcal-default-calendar-list-grouped");t.on("change",function(){var e=c(this).val();"grid"===e?(s.hide(),d.hide(),l.show()):"list"===e?(l.hide(),d.hide(),s.show()):"list-grouped"===e&&(l.hide(),s.hide(),d.show())}).trigger("change"),c("#_calendar_type").on("change",function(){c('label[for*="_calendar_view_"]').hide(),c('#calendar-settings-panel table[id*="-settings"]').hide(),c('label[for="_calendar_view_'+c(this).val()+'"]').show(),c('#calendar-settings-panel table[id="'+c(this).val()+'-settings"]').show()}).trigger("change"),c(".simcal-field-color-picker").wpColorPicker(),c(".simcal-field-select-enhanced").each(function(e,i){const a=c(i),t=a.data("noresults"),n=a.data("allowclear");a.select2({allowClear:"undefined"!==n&&n,placeholder:{id:"",placeholder:""},dir:"undefined"!=simcal_admin.text_dir?simcal_admin.text_dir:"ltr",tokenSeparators:[","],width:"100%",language:{noResults:function(){return"undefined"!==t?t:""}}})});c(".simcal-field-date-picker").each(function(e,i){var i=c(i).find("input"),a={autoSize:!0,changeMonth:!0,changeYear:!0,dateFormat:"yy-mm-dd",firstDay:1,prevText:'<i class="simcal-icon-left"></i>',nextText:'<i class="simcal-icon-right"></i>',yearRange:"1900:2050",beforeShow:function(){c("#ui-datepicker-div").addClass("simcal-date-picker")}};c(i).datepicker(a),c(i).datepicker("option",c.datepicker.regional[simcal_admin.locale])});var o=c(".simcal-field-datetime-format");function r(e){var i=c(e).find("input"),a=c(e).find("> div select"),e=c(e).find("code");let n="",l="";a.each(function(e,i){var a=c(i).val(),t=c(i).find("> option:selected");a.length&&(t.data("trim")?(l=l.trim()+c(i).val(),n=n.trim()+t.data("preview")):(l+=c(i).val()+" ",n+=t.data("preview")+" "))}),i.val(l),e.text(n)}o.sortable({items:"> div",stop:function(){r(c(this))}}),o.each(function(e,i){c(i).find("> div select").each(function(e,i){c(i).on("change",function(){r(c(this).closest("div.simcal-field-datetime-format"))})}),r(i)}),c(".simcal-field-datetime-format-php").each(function(e,i){const a=c(i).find("input"),t=c(i).find("code");c(a).on("keyup",function(){var e={action:"simcal_date_i18n_input_preview",value:a.val()};c.post(simcal_admin.ajax_url,e,function(e){c(t).text(e.data)})})}),c('input[type="number"].simcal-field').each(function(e,i){const a=c(i),t=a.attr("min"),n=a.attr("max");a.on("change",function(){var e=parseInt(c(this).val());t&&e<t&&c(this).val(t),n&&e>n&&c(this).val(n)})}),c(".simcal-field-switch-other").on("change",function(){c(this).find("option").each(function(e,i){var a=c(i).data("show-field"),t=c(i).data("show-fields"),n=c(i).data("hide-field"),l=c(i).data("hide-fields"),a=a?c("#"+a):"",n=n?c("#"+n):"";c(i).is(":selected")&&(a&&a.show(),n&&n.hide(),t&&(i=l.split(","),c(i).each(function(e,i){c("#"+i).hide()})),l)&&(a=l.split(","),c(a).each(function(e,i){c("#"+i).hide()}))})}).trigger("change"),c(".simcal-field-show-other").on("change",function(){c(this).find("option").each(function(e,i){var a=c(i).data("show-field"),t=void 0!==a&&a.length?c("#"+a):"",a=void 0!==a&&a.length?t.next():"";t.length&&(c(i).is(":selected")?(t.show(),a.hasClass("select2")&&a.show()):(t.hide(),a.hasClass("select2")&&a.hide()))})}).trigger("change"),c(".simcal-field-show-next").on("change",function(){let e,i,a,t;c(this).is(":checkbox")?(a=c(this).parent().next(),c(this).is(":checked")?a.show():a.hide()):(e=c(this).val(),i=c(this).data("show-next-if-value"),a=c(this).nextUntil().not("i"),t=a.length?a.next():"",e===i?(a.show(),t.hasClass("select2")&&t.show()):(a.hide(),t.hasClass("select2")&&t.hide()))}).trigger("change"),c("#simcal-clear-cache").on("click",function(e){e.preventDefault();const i=c(this).find("i");c.ajax({url:simcal_admin.ajax_url,method:"POST",data:{action:"simcal_clear_cache",id:c(this).data("id")},beforeSend:function(){i.fadeToggle()},success:function(){i.fadeToggle()},error(e){console.log(e)}})}),c("#simcal-drip-signup").on("click",function(e){e.preventDefault();var e=c("#simcal-drip"),i=e.find(".signup"),a=e.find(".thank-you"),t=c("#simcal-drip-form"),n=e.find("#simcal-drip-field-first_name"),l=t.find("#simcal-drip-real-field-first_name"),e=e.find("#simcal-drip-field-email"),s=t.find("#simcal-drip-real-field-email");l.val(n.val()),s.val(e.val()),i.hide(),a.show(),t.submit()}),c("#_feed_type").on("change",function(e){"grouped-calendars"===c(this).val()?c("#use_calendar").remove():c("#use_calendar").length||c("#_feed_timezone_setting").append('<option id="use_calendar" value="use_calendar" data-show-field="_use_calendar_warning">Event source default</option>')}),c(".simcal-addon-manage-license").on("click",function(e){e.preventDefault();let i="";const a=c(this),t=a.closest(".simcal-addon-manage-license-buttons"),n=a.closest(".simcal-addon-manage-license-field").find("> input"),l=t.find(".error"),s=a.find("i");if(c(this).hasClass("activate"))i="activate_license";else{if(!c(this).hasClass("deactivate"))return;i="deactivate_license"}c.ajax({url:simcal_admin.ajax_url,method:"POST",data:{action:"simcal_manage_add_on_license",add_on:c(this).data("add-on"),license_key:n.val(),license_action:i,nonce:c("#simcal_license_manager").val()},beforeSend:function(){s.fadeToggle()},success(e){s.fadeToggle(),"activate_license"===i?"valid"===e.data?(a.hide(),n.attr("disabled","disabled"),c(t).find(".label").show(),c(t).find(".deactivate").show(),l.hide()):l.show().text(e.data):"deactivated"===e.data?(a.hide(),n.removeAttr("disabled"),c(t).find(".label").hide(),c(t).find(".activate").show(),l.hide()):l.show().text(e.data)},error(e){console.log(e),s.fadeToggle()}})}),c("#simcal-reset-licenses").on("click",function(e){e.preventDefault();const i=c(this).find("i"),a=c(this).data("dialog"),t=confirm(a);!0===t&&c.ajax({url:simcal_admin.ajax_url,method:"POST",data:{action:"simcal_reset_add_ons_licenses",nonce:c("#simcal_license_manager").val()},beforeSend:function(){i.toggle()},success(e){"success"==e.data?location.reload():console.log(e)},error(e){console.log(e)}})})})}();