/*! Simple Calendar - 3.1.38
 * https://simplecalendar.io
 * Copyright (c) Xtendify Technologies 2023
 * Licensed GPLv2+ */

!function(m,n){"use strict";jQuery(function(_){function y(e,n,i,s){e.each(function(e,t){var t=_(t),a=new Date(1e3*n);t.hasClass("simcal-prev")?((a=new Date(a.setMonth(a.getMonth(),1))).setDate(0),a.getTime()/1e3<=i?t.attr("disabled","disabled"):t.removeAttr("disabled")):((a=new Date(a.setMonth(a.getMonth()+1,1))).setDate(0),a.setHours(23),a.setMinutes(59),a.setSeconds(59),a.getTime()/1e3>=s?t.attr("disabled","disabled"):t.removeAttr("disabled"))})}function T(e,t,a,n,i,s){var t=t.find(".simcal-events-list-container"),d=t.data("prev"),c=t.data("next"),l=t.find("li.simcal-event:last").data("start");e.each(function(e,t){t=_(t);i?t.hasClass("simcal-prev")?"prev"==i?d<=a&&s<=a&&t.attr("disabled","disabled"):t.removeAttr("disabled"):t.hasClass("simcal-next")&&("next"==i?(n<=c&&n<=s||n<=l)&&t.attr("disabled","disabled"):t.removeAttr("disabled")):t.hasClass("simcal-prev")?d<=a&&s<=a&&t.attr("disabled","disabled"):t.hasClass("simcal-next")&&(n<=c&&n<=s||n<=l)&&t.attr("disabled","disabled")})}function M(e){var t=_(e).find(".simcal-current"),a=_(e).find(".simcal-events-list-container"),n=a.data("heading-small"),a=a.data("heading-large"),i=_("<h3 />");e.width()<400?i.text(n):i.text(a),t.html(i)}_(".simcal-default-calendar").each(function(e,t){var o,r,f=_(t),m=f.data("calendar-id"),u=f.data("offset"),h=f.data("events-first"),v=f.data("calendar-end"),t=f.find(".simcal-calendar-head"),g=t.find(".simcal-nav-button"),p=f.find(".simcal-ajax-loader"),b=t.find(".simcal-current"),t=b.data("calendar-current"),w=b.find("span.simcal-current-month"),x=b.find("span.simcal-current-year"),a=n.tz(1e3*t,f.data("timezone"));f.hasClass("simcal-default-calendar-grid")?(r="simcal_default_calendar_draw_grid",o=new Date(a.year(),a.month()),y(g,o.getTime()/1e3,h,v)):(T(g,f,h,v,!(r="simcal_default_calendar_draw_list"),t),M(f)),g.on("click",function(){var t,a,n,i,s,e,d,c,l=_(this).hasClass("simcal-next")?"next":"prev";"simcal_default_calendar_draw_grid"==r?(t=f.find(".simcal-month"),"prev"==l?a=new Date(o.setMonth(o.getMonth()-1,1)):((a=new Date(o.setMonth(o.getMonth()+2,1))).setDate(0),a.setHours(23),a.setMinutes(59),a.setSeconds(59)),n=a.getMonth(),i=a.getFullYear(),_.ajax({url:simcal_default_calendar.ajax_url,type:"POST",dataType:"json",cache:!1,data:{action:r,month:n+1,year:i,id:m},beforeSend:function(){p.fadeToggle()},success:function(e){w.text(simcal_default_calendar.months.full[n]),x.text(i),b.attr("data-calendar-current",a.getTime()/1e3+u+1),y(g,a.getTime()/1e3,h,v),p.fadeToggle(),o=a,t.replaceWith(e.data),j(f),D()},error:function(e){console.log(e)}})):(e=(s=f.find(".simcal-events-list-container")).data("prev"),d=s.data("next"),c="prev"==l?e:d,_.ajax({url:simcal_default_calendar.ajax_url,type:"POST",dataType:"json",cache:!1,data:{action:r,ts:c,id:m},beforeSend:function(){p.fadeToggle()},success:function(e){s.replaceWith(e.data),b.attr("data-calendar-current",c),M(f),T(g,f,h,v,l,c),p.fadeToggle(),D()},error:function(e){console.log(e)}}))})});var e=_(".simcal-default-calendar-grid");function j(e){var t,e=_(e).find("> table"),a=e.find("thead").find("th.simcal-week-day"),n=e.find("td.simcal-day > div"),i=e.find("ul.simcal-events"),s=i.find("> li > .simcal-event-title"),d=e.find(".simcal-events-toggle"),c=e.find("span.simcal-events-dots"),l=e.find(".simcal-tooltip-content"),o=e.find(".simcal-event-toggled"),r=e.data("event-bubble-trigger"),f=n.first().width();f<60?(a.each(function(e,t){_(t).text(_(t).data("screen-small"))}),i.hide(),s.hide(),"undefined"!=d&&(d.hide(),"undefined"!=o)&&o.show(),c.show(),r="click",n.css("min-height",t=f-10+"px"),e.find("span.simcal-events-dots:not(:empty)").css("min-height",t)):(f<=240?a.each(function(e,t){_(t).text(_(t).data("screen-medium"))}):a.each(function(e,t){_(t).text(_(t).data("screen-large"))}),i.show(),s.show(),"undefined"!=d&&(d.show(),"undefined"!=o)&&o.hide(),c.hide(),n.css("min-height",f+"px")),n.each(function(e,a){var n,t=_(a).find("span.simcal-events-dots"),i=_(a).find(".simcal-tooltip"),t=f<60?(l.show(),t):(l.hide(),i);t.each(function(e,t){_(t).qtip({content:f<60?_(a).find("ul.simcal-events"):_(t).find("> .simcal-tooltip-content"),position:{my:"top center",at:"bottom center",target:_(t),viewport:!(f<60)||_(m),adjust:{method:"shift",scroll:!1}},style:{def:!1,classes:"simcal-default-calendar simcal-event-bubble"},show:{solo:!0,effect:!1,event:"hover"==r?"mouseenter":"click"},hide:{fixed:!0,effect:!1,event:"click"==r?"unfocus":"mouseleave",delay:100},events:{show:function(e,t){n&&n.id&&n.id!=t.id&&n.hide(),n=t}},overwrite:!1})})})}function D(){_(".simcal-events-toggle").each(function(e,t){var a=_(t).prev(".simcal-events").find(".simcal-event-toggled"),n=_(t).find("i");_(t).on("click",function(){n.toggleClass("simcal-icon-rotate-180"),a.slideToggle()})})}e.each(function(e,t){j(t),_(t).on("change",function(){j(this)})}),m.onresize=function(){e.each(function(e,t){j(t)})},D()})}(this,moment);